Ext.namespace("Kebab");Kebab=function(){var a=null;return{applicationEnvironment:APPLICATION_ENV,baseUrl:BASE_URL,i18n:{languages:LANGUAGES},init:function(){a=new Kebab.OS();a.init(this)},getOS:function(){return a},helper:{loader:function(b,c){if(b){a.showPreLoader(c)}else{a.hidePreLoader()}},url:function(b){return a.generateUrl(b)},redirect:function(b){a.redirect(b)},translate:function(b){return a.getTranslator().translate(b)},log:function(c,b){a.getLogger().log(c,b)},message:function(e,d,b,c){a.getNotification().message(e,d,b,c)},dialog:function(d,c,b){a.getNotification().dialog(d,c,b)}}}}();Ext.onReady(Kebab.init,Kebab);Ext.namespace("Kebab.OS");Kebab.OS=function(d){var a=null,c=false,b=300;this.kebab=null;this.logger=Ext.emptyFn;this.translator=Ext.emptyFn;this.init=function(g){this.kebab=g;Ext.QuickTips.init();Ext.apply(Ext.QuickTips.getQuickTip(),{trackMouse:true});try{this.buildBaseObjects();this.buildProjectInfo()}catch(f){Kebab.helper.log("Kebab.OS builders not loaded...","ERR")}a=Ext.get("kebab-loading-mask");a.on("click",function(){this.hidePreLoader(0.5)},this);new Ext.util.DelayedTask(function(){this.hidePreLoader(0.5)},this).delay(b);Kebab.helper.log("Kebab.OS initialized...");return this};this.buildBaseObjects=function(){this.translator=new Kebab.Translator(this.getKebab().i18n);this.logger=new Kebab.Logger(this.getKebab().applicationEnvironment);this.notification=new Kebab.Notification()};this.buildProjectInfo=function(){Ext.fly("project-info").on("mouseenter",function(f,e,g){Ext.fly("project-info").scale([150],[Ext.isChrome?95:85],{easing:"elasticOut",duration:0.6,callback:function(){new Ext.util.DelayedTask(function(){Ext.fly("project-info").scale([120],[18],{easing:"easeIn",duration:0.1})}).delay(3000)}})})};this.hidePreLoader=function(e){if(!c){a.fadeOut({remove:false,duration:e});c=true}};this.showPreLoader=function(e){a.fadeIn({duration:e});c=false};this.redirect=function(e){this.showPreLoader(0);new Ext.util.DelayedTask(function(){window.location.href=this.generateUrl(e)},this).delay(b)};this.generateUrl=function(e){return this.getBaseUrl()+"/"+e},this.getKebab=function(){return this.kebab};this.getTranslator=function(){return this.translator};this.getLogger=function(){return this.logger};this.getNotification=function(){return this.notification};this.getBaseUrl=function(){return this.getKebab().baseUrl};this.getEnvironment=function(){return this.getKebab().applicationEnvironment};this.logoutAction=function(e,f){Ext.Ajax.request({url:this.generateUrl("kebab/session/"+e),method:"DELETE",success:function(){if(f){this.redirect("backend")}else{return true}},failure:function(){this.getNotification().message("Argh! %(","Operation failure....",true);return false},scope:this},this)};this.shutDownAction=function(e){if(this.logoutAction(e,false)){window.close()}};this.rebootAction=function(){this.redirect("backend/desktop")}};Kebab.Logger=function(a){var b="production";this.log=function(d,c){if(a!=b){switch(c){default:console.log(d);break;case"INFO":this.info(d);break;case"WARN":this.warn(d);break;case"ERR":this.error(d);break}}};this.info=function(c){if(a!=b){console.info(c)}};this.warn=function(c){if(a!=b){console.warn(c)}};this.error=function(c){if(a!=b){console.error(c)}}};Ext.namespace("Kebab.Notification");Kebab.Notification=Ext.extend(Ext.util.Observable,{messageContainer:null,constructor:function(a){Ext.apply(this,a);Kebab.Notification.superclass.constructor.call(this,arguments)},message:function(e,c,a,b){var g=Kebab.helper.translate("Click to hide");var f=function(h,i){return['<div ext:qtip="'+g+'">',"<p><h3>",h,"</h3>",i,"</p>","</div>"].join("")};this.messageContainer=this.messageContainer||Ext.DomHelper.insertFirst(document.body,{cls:"kebab-notifications-body",id:"kebab-notifications"},true).alignTo(document.body,"tr-tr",[-15,50]);var d=Ext.DomHelper.append(this.messageContainer,{cls:"kebab-notifications kebab-shadow-std kebab-rounded-corners "+this.getColor(b),html:f(Kebab.helper.translate(e),Kebab.helper.translate(c)),alignTo:[0,33]},true);if(!a){d.slideIn("t",{easing:"backOut",duration:0}).pause(2).ghost("b",{remove:true,easing:"easeIn",duration:0.15,callback:function(){d.remove()},scope:this})}else{d.slideIn("t",{easing:"backOut",duration:0});d.on("click",function(){d.puff({remove:true,easing:"easeIn",duration:0.15,callback:function(){d.remove()},scope:this})})}},dialog:function(d,c,b){var a=this.getIcon(b);Ext.Msg.show({modal:true,title:Kebab.helper.translate(d),msg:Kebab.helper.translate(c),icon:a,buttons:Ext.Msg.OK})},getIcon:function(b){var a=null;switch(b){case"WARN":a=Ext.MessageBox.WARNING;break;case"ERR":a=Ext.MessageBox.ERROR;break;default:a=Ext.MessageBox.INFO;break}return a},getColor:function(b){var a=null;switch(b){case"ALERT":a="notify-alert";break;case"CRIT":a="notify-critic";break;case"ERR":a="notify-error";break;case"WARN":a="notify-warning";break;case"NOTICE":a="notify-notice";break;default:a="notify-info";break}return a}});Ext.namespace("Kebab.Translator");Kebab.Translator=function(a){this.i18n=a;this.translate=function(){var c;try{c=this.getI18n().translations[arguments[0]]}catch(g){Kebab.getOS().getLogger().log("'"+arguments[0]+'" Translation is not found...',"ERR");c="NOT FOUND ("+arguments[0]+")"}var f=c||arguments[0];var d=Ext.toArray(arguments,1);var b=function(h,e){return h.replace(/\{(\d+)\}/g,function(j,k){return e[k]})};return b(f,d)};this.getLocale=function(){return this.getLanguages(true).language},this.getLanguages=function(c){if(c){var b=null;Ext.each(this.getI18n().languages,function(d){if(d.active){b=d;return null}});return b}else{return this.getI18n().languages}},this.getTranslations=function(){return this.getI18n().translations},this.getI18n=function(){return this.i18n},this.addTranslations=function(b){Ext.applyIf(this.i18n.translations,b)}};