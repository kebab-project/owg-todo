SignIn=function(){var d=null,c=null,b=null,a=null;return{init:function(){d=Kebab.helper.url("kebab/session");c=Kebab.helper.url("kebab/forgot-password");this.buildSignInForm();this.buildForgotPasswordForm()},buildSignInForm:function(){b=new Ext.FormPanel({renderTo:"signIn-form",bodyCssClass:"kebab-transparent",url:d,frame:false,labelAlign:"top",width:"100%",buttonAlign:"left",border:false,defaultType:"textfield",hideLabels:true,items:[{fieldLabel:Kebab.helper.translate("Your user name"),emptyText:Kebab.helper.translate("Your user name"),name:"userName",width:180,allowBlank:false},{fielLabel:Kebab.helper.translate("Your password"),emptyText:Kebab.helper.translate("Your password"),name:"password",width:140,inputType:"password",allowBlank:false},{xtype:"checkboxgroup",items:[{boxLabel:Kebab.helper.translate("Keep signed in"),name:"rememberMe",checked:false}]}],buttons:[{width:80,iconCls:"icon-accept",text:Kebab.helper.translate("Send"),handler:function(){this.signInAction()},scope:this},{xtype:"panel",border:false,bodyCssClass:"kebab-transparent",html:'<a href="#" id="singUp-link">'+Kebab.helper.translate("Sign-up")+"</a>"+Kebab.helper.translate(" or ")+'<a href="#" id="forgotPassword-link">'+Kebab.helper.translate("Forgot password")+"</a>"}],keys:[{key:[Ext.EventObject.ENTER],handler:function(){this.signInAction()},scope:this}],listeners:{afterRender:function(){Ext.fly("singUp-link").on("click",function(f){f.stopEvent();Kebab.helper.redirect("backend/sign-up")},this);Ext.fly("forgotPassword-link").on("click",function(f){f.stopEvent();this.showForgotPasswordForm()},this)},scope:this}})},buildForgotPasswordForm:function(){a=new Ext.FormPanel({renderTo:"forgotPassword-form",bodyCssClass:"kebab-transparent",url:c,method:"POST",frame:false,labelAlign:"top",width:"100%",buttonAlign:"left",border:false,defaultType:"textfield",hideLabels:true,items:[{fieldLabel:Kebab.helper.translate("Your e-mail address"),emptyText:Kebab.helper.translate("Your e-mail address"),name:"email",anchor:"100%",allowBlank:false,vtype:"email"}],buttons:[{width:80,iconCls:"icon-accept",text:Kebab.helper.translate("Send"),handler:function(){this.forgotPasswordAction()},scope:this},{xtype:"panel",border:false,bodyCssClass:"kebab-transparent",html:'<a href="#" id="forgotPasswordCancel-link">'+Kebab.helper.translate("Cancel")+"</a>"}],keys:[{key:[Ext.EventObject.ENTER],handler:function(){this.forgotPasswordAction()},scope:this}],listeners:{afterRender:function(){Ext.fly("forgotPasswordCancel-link").on("click",function(f){f.stopEvent();this.showSignInForm()},this)},scope:this}})},showPreLoader:function(){Ext.fly("kebab-progress-bar").fadeIn();Ext.fly("signIn-form-wrapper").fadeOut();Ext.fly("forgotPassword-form-wrapper").fadeOut();Ext.fly("kebab-system-backend-signIn-container").scale(270,[65])},showSignInForm:function(){Ext.fly("kebab-progress-bar").fadeOut();Ext.fly("signIn-form-wrapper").fadeIn();Ext.fly("forgotPassword-form-wrapper").fadeOut();Ext.fly("kebab-system-backend-signIn-container").scale([330],[245])},showForgotPasswordForm:function(){Ext.fly("kebab-progress-bar").fadeOut();Ext.fly("signIn-form-wrapper").fadeOut();Ext.fly("forgotPassword-form-wrapper").fadeIn();Ext.fly("kebab-system-backend-signIn-container").scale(400,[175])},signInAction:function(){if(b.getForm().isValid()){this.showPreLoader();b.getForm().submit({success:function(){Kebab.helper.redirect("backend/desktop")},failure:function(){this.showSignInForm()},scope:this})}},forgotPasswordAction:function(){if(a.getForm().isValid()){this.showPreLoader();a.getForm().submit({success:function(){this.showSignInForm()},failure:function(){this.showForgotPasswordForm()},scope:this})}}}}();Ext.onReady(SignIn.init,SignIn);